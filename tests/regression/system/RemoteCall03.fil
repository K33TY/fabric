package system;

public class RemoteCall03 {
  int i;

  public void m() {
    i++;
  }

  public void m_remote(fabric.lang.Principal p) {
    i++;
  }

  public static void main(String[] args) {
    RemoteCall03 t = null;
    Core core = Client.getClient().getCore("core0");
    RemoteClient remoteClient = Client.getClient().getClient("core0");
    atomic {
      t = new RemoteCall03@core();
      t.i = 10;
      t.m@remoteClient();
    }

    int curI = 0;
    atomic {
      curI = t.i;
    }

    if (curI == 11) System.out.println("TEST PASSED.");
    else System.out.println("TEST FAILED: expected t.i == 11 but got " + curI);
  }
}

