package bank;
import fabricated.lang.JifObject;

/**
 * An instance of BankAcct is owned by a BankPrincipal.
 * A BankAcct has a balance, which represents the money in the account
 * Methods are provided for the principal 
 **/
public class BankAcct[label L] implements JifObject[L] {
	private principal{UserEP->UserEP,BankEP;BankEP<-BankEP;UserEP<-BankEP} owner;
	private int{UserEP->UserEP,BankEP;BankEP<-BankEP;UserEP<-BankEP} balance = 500;

	public BankAcct{L} () {
	}

	public int{UserEP->BankEP;BankEP<-;UserEP<-BankEP} getBalance() {
		return balance;
	}
	
	public boolean{UserEP->BankEP;BankEP<-;UserEP<-BankEP} debit{UserEP->UserEP,BankEP;BankEP<-BankEP;UserEP<-BankEP} (int{UserEP->UserEP,BankEP;BankEP<-BankEP;UserEP<-BankEP}  amt) {
		boolean result = false;
		atomic {
			if(amt <= balance) {
				balance = balance - amt;
				result = true;
			}
		}
		return result;
	}

	public void credit{UserEP->UserEP,BankEP;BankEP<-BankEP;UserEP<-BankEP} (int{UserEP->UserEP,BankEP;BankEP<-BankEP;UserEP<-BankEP}  amt) {
		atomic {
			balance = balance + amt;
		}
	}


/**
 * Section with implemented interface methods
 */
	public int{L} hashCode() {
		return 0;
	}

	public String{L} toString() {
		return "BankAcct";
	}

	public boolean equals(IDComparable[{L}] obj) {
		if (this == obj)
		return true;
		return false;
	}

	public boolean equals(label lbl, IDComparable[{*lbl}] obj){
		if (this == obj)
		return true;
		return false;	
	}
}
