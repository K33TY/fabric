package sif.servlet;
import fabric.lang.Principal;

/**
 * Global state for a single session.
 */

public class SessionState[covariant label T] {

    private SessionState{T}(String{T} sessionId) {
        this.sessionPrincipal = new SessionPrincipal[T](this);
        this.sessionId        = sessionId;
    }

    private final Principal{T} sessionPrincipal;
    private final String{T}    sessionId;

    public final String{T} getSessionId() {
        return this.sessionId;
    }

    public final Principal{T} sessionPrincipal() {
        return this.sessionPrincipal;
    }
    
    /** convenience method for non-fabric code */
    public static SessionState[lbl]{*lbl} createSessionState{*lbl}(label{*lbl} lbl, String{*lbl} id) {
    	atomic {
    		return new SessionState[lbl](id);
    	}
    }
}

