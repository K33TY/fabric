package fabnfs;

import fabric.worker.Core;
import fabric.worker.Worker;
import fabric.util.HashMap;
import fabnfs.util.FabDirectory;

public class InitializeFS {
  public static void main(String[] args) {
    atomic {
      if (args.length < 1) {
	System.out.println("Usage: fabnfs.InitializeFS <core>");
	return;
      }

      Core core = Worker.getWorker().getCore(args[0]);
      FabDirectory rootDir = new FabDirectory@core();

      HashMap map = (HashMap) core.getRoot();

      map.put("fileSystem", rootDir);
    }
  }
}
