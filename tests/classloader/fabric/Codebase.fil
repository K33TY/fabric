package fabric;

import java.io.IOException;
import java.util.Properties;
import fabric.util.Collections;
import fabric.util.HashMap;
import fabric.util.Map;
import fabric.util.Iterator;

public class Codebase {	
	
  /* map from strings to classes */
  private Map/*String, Class*/ classes;
  
  Class resolveClassName(String name) {
    return (Class)classes.get(name);
  }

  public java.lang.Class toJavaClass(String name) {
	  	Class c = resolveClassName(name);
	  	if (c.getCodebase().equals(this))
	  		return c.getCodebase().getClassLoader().getJavaClass(c);
	  	else
	  		return c.getCodebase().toJavaClass(name);
  }
  
  FabricClassLoader getClassLoader() {
    return FabricClassLoader.getClassLoader(this);
  }
  
  public Codebase(Map/*String, Class*/ classes) {
    this.classes = new HashMap(classes);
  }
  
  public Map/*String, Class*/ getClasses() {
	atomic {
		return Collections.unmodifiableMap(classes);
	}
  }
  
  public Class getClass(String s) {
	  return (Class)classes.get(s);
  }
  
}
