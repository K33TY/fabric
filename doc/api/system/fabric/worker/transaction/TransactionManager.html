<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_21) on Mon Aug 30 19:14:44 EDT 2010 -->
<TITLE>
TransactionManager
</TITLE>

<META NAME="date" CONTENT="2010-08-30">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TransactionManager";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../fabric/worker/transaction/ReadMapEntry.html" title="class in fabric.worker.transaction"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../fabric/worker/transaction/TransactionRegistry.html" title="class in fabric.worker.transaction"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?fabric/worker/transaction/TransactionManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TransactionManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
fabric.worker.transaction</FONT>
<BR>
Class TransactionManager</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>fabric.worker.transaction.TransactionManager</B>
</PRE>
<HR>
<DL>
<DT><PRE>public final class <B>TransactionManager</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
Holds transaction management information for a single thread. Each thread has
 its own TransactionManager.
 <p>
 We say that a transaction has acquired a write lock on an object if any entry
 in the object's <code>$history</code> list has <code>$writeLockHolder</code>
 set to that transaction. @see fabric.lang.Object._Impl
 </p>
 <p>
 We say that a transaction has acquired a read lock if it is in the
 "read list" for that object. @see fabric.lang.Object._Impl.$readMapEntry
 </p>
 <p>
 When a transaction acquires a read lock, we ensure that the <i>read
 condition</i> holds: that the holder of the write lock is an ancestor of that
 transaction. Before reading an object, we ensure that the transaction holds a
 read lock and that the read condition still holds.
 </p>
 <p>
 When a transaction acquires a write lock, we ensure that the <i>write
 condition</i> holds: the holders of the read and write locks are all
 ancestors of that transaction. Before writing an object, we ensure that the
 transaction holds a write lock and that the write condition still holds.
 </p>
 <p>
 Assumptions:
 <ul>
 <li>Once the top-level transaction within a thread aborts or commits, that
 thread will terminate without performing further operations on the
 transaction manager.</li>
 <li>The fetch operation will not be invoked concurrently on the same object.</li>
 </ul>
 </p>
 <p>
 The following objects are used as condition variables:
 <ul>
 <li>Log.children - for signalling that all sub-transactions of a given
 transaction have finished.</li>
 <li>Impl objects - for signalling to readers and writers that a read or write
 lock on that object has been released.
 </ul>
 </p>
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#abortTransaction()">abortTransaction</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#associateAndSyncLog(fabric.worker.transaction.Log, fabric.common.TransactionID)">associateAndSyncLog</A></B>(<A HREF="../../../fabric/worker/transaction/Log.html" title="class in fabric.worker.transaction">Log</A>&nbsp;log,
                    <A HREF="../../../fabric/common/TransactionID.html" title="class in fabric.common">TransactionID</A>&nbsp;tid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Associates the given log with this worker's transaction manager and
 synchronizes the log with the given tid.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#associateLog(fabric.worker.transaction.Log)">associateLog</A></B>(<A HREF="../../../fabric/worker/transaction/Log.html" title="class in fabric.worker.transaction">Log</A>&nbsp;log)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Associates the given transaction log with this transaction manager.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#checkForStaleObjects()">checkForStaleObjects</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks whether any of the objects used by a transaction are stale.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#commitTransaction()">commitTransaction</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Commits the transaction if possible; otherwise, aborts the transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#commitTransaction(boolean)">commitTransaction</A></B>(boolean&nbsp;useAuthentication)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Commits the transaction if possible; otherwise, aborts the transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#commitTransactionAt(long)">commitTransactionAt</A></B>(long&nbsp;commitTime)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#deregisterThread(java.lang.Thread)">deregisterThread</A></B>(java.lang.Thread&nbsp;thread)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registers that the given thread has finished.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../fabric/worker/transaction/Log.html" title="class in fabric.worker.transaction">Log</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#getCurrentLog()">getCurrentLog</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../fabric/common/TransactionID.html" title="class in fabric.common">TransactionID</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#getCurrentTid()">getCurrentTid</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../fabric/worker/remote/RemoteWorker.html" title="class in fabric.worker.remote">RemoteWorker</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#getFetchWorker(fabric.lang.Object._Proxy)">getFetchWorker</A></B>(<A HREF="../../../fabric/lang/Object._Proxy.html" title="class in fabric.lang">Object._Proxy</A>&nbsp;proxy)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../fabric/worker/transaction/TransactionManager.html" title="class in fabric.worker.transaction">TransactionManager</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#getInstance()">getInstance</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../fabric/worker/transaction/ReadMapEntry.html" title="class in fabric.worker.transaction">ReadMapEntry</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#getReadMapEntry(fabric.lang.Object._Impl, long)">getReadMapEntry</A></B>(<A HREF="../../../fabric/lang/Object._Impl.html" title="class in fabric.lang">Object._Impl</A>&nbsp;impl,
                long&nbsp;expiry)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../fabric/lang/security/SecurityCache.html" title="class in fabric.lang.security">SecurityCache</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#getSecurityCache()">getSecurityCache</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../fabric/worker/remote/UpdateMap.html" title="class in fabric.worker.remote">UpdateMap</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#getUpdateMap()">getUpdateMap</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#registerCreate(fabric.lang.Object._Impl)">registerCreate</A></B>(<A HREF="../../../fabric/lang/Object._Impl.html" title="class in fabric.lang">Object._Impl</A>&nbsp;obj)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#registerRead(fabric.lang.Object._Impl)">registerRead</A></B>(<A HREF="../../../fabric/lang/Object._Impl.html" title="class in fabric.lang">Object._Impl</A>&nbsp;obj)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#registerRemoteCall(fabric.worker.remote.RemoteWorker)">registerRemoteCall</A></B>(<A HREF="../../../fabric/worker/remote/RemoteWorker.html" title="class in fabric.worker.remote">RemoteWorker</A>&nbsp;worker)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registers a remote call to the given worker.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#registerThread(java.lang.Thread)">registerThread</A></B>(java.lang.Thread&nbsp;thread)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registers the given thread with the current transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#registerWrite(fabric.lang.Object._Impl)">registerWrite</A></B>(<A HREF="../../../fabric/lang/Object._Impl.html" title="class in fabric.lang">Object._Impl</A>&nbsp;obj)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This should be called <i>before</i> the object is modified.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#sendCommitMessagesAndCleanUp()">sendCommitMessagesAndCleanUp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends commit messages to the cohorts.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#sendPrepareMessages(long)">sendPrepareMessages</A></B>(long&nbsp;commitTime)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sends prepare messages to the cohorts.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#startThread(java.lang.Thread)">startThread</A></B>(java.lang.Thread&nbsp;thread)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Starts the given thread, registering it as necessary.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#startTransaction()">startTransaction</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Starts a new transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/worker/transaction/TransactionManager.html#startTransaction(fabric.common.TransactionID)">startTransaction</A></B>(<A HREF="../../../fabric/common/TransactionID.html" title="class in fabric.common">TransactionID</A>&nbsp;tid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Starts a new transaction with the given tid.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getReadMapEntry(fabric.lang.Object._Impl, long)"><!-- --></A><H3>
getReadMapEntry</H3>
<PRE>
public static <A HREF="../../../fabric/worker/transaction/ReadMapEntry.html" title="class in fabric.worker.transaction">ReadMapEntry</A> <B>getReadMapEntry</B>(<A HREF="../../../fabric/lang/Object._Impl.html" title="class in fabric.lang">Object._Impl</A>&nbsp;impl,
                                           long&nbsp;expiry)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getInstance()"><!-- --></A><H3>
getInstance</H3>
<PRE>
public static <A HREF="../../../fabric/worker/transaction/TransactionManager.html" title="class in fabric.worker.transaction">TransactionManager</A> <B>getInstance</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="abortTransaction()"><!-- --></A><H3>
abortTransaction</H3>
<PRE>
public void <B>abortTransaction</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="commitTransaction()"><!-- --></A><H3>
commitTransaction</H3>
<PRE>
public void <B>commitTransaction</B>()
                       throws <A HREF="../../../fabric/worker/AbortException.html" title="class in fabric.worker">AbortException</A>,
                              <A HREF="../../../fabric/worker/TransactionRestartingException.html" title="class in fabric.worker">TransactionRestartingException</A>,
                              <A HREF="../../../fabric/worker/TransactionAtomicityViolationException.html" title="class in fabric.worker">TransactionAtomicityViolationException</A></PRE>
<DL>
<DD>Commits the transaction if possible; otherwise, aborts the transaction.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../fabric/worker/AbortException.html" title="class in fabric.worker">AbortException</A></CODE> - if the transaction was aborted.
<DD><CODE><A HREF="../../../fabric/worker/TransactionRestartingException.html" title="class in fabric.worker">TransactionRestartingException</A></CODE> - if the transaction was aborted and needs to be retried.
<DD><CODE><A HREF="../../../fabric/worker/TransactionAtomicityViolationException.html" title="class in fabric.worker">TransactionAtomicityViolationException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="commitTransaction(boolean)"><!-- --></A><H3>
commitTransaction</H3>
<PRE>
public void <B>commitTransaction</B>(boolean&nbsp;useAuthentication)
                       throws <A HREF="../../../fabric/worker/AbortException.html" title="class in fabric.worker">AbortException</A>,
                              <A HREF="../../../fabric/worker/TransactionRestartingException.html" title="class in fabric.worker">TransactionRestartingException</A>,
                              <A HREF="../../../fabric/worker/TransactionAtomicityViolationException.html" title="class in fabric.worker">TransactionAtomicityViolationException</A></PRE>
<DL>
<DD>Commits the transaction if possible; otherwise, aborts the transaction.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>useAuthentication</CODE> - whether to use an authenticated channel to talk to the store
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../fabric/worker/AbortException.html" title="class in fabric.worker">AbortException</A></CODE> - if the transaction was aborted.
<DD><CODE><A HREF="../../../fabric/worker/TransactionRestartingException.html" title="class in fabric.worker">TransactionRestartingException</A></CODE> - if the transaction was aborted and needs to be retried.
<DD><CODE><A HREF="../../../fabric/worker/TransactionAtomicityViolationException.html" title="class in fabric.worker">TransactionAtomicityViolationException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="commitTransactionAt(long)"><!-- --></A><H3>
commitTransactionAt</H3>
<PRE>
public void <B>commitTransactionAt</B>(long&nbsp;commitTime)
                         throws <A HREF="../../../fabric/worker/AbortException.html" title="class in fabric.worker">AbortException</A>,
                                <A HREF="../../../fabric/worker/TransactionRestartingException.html" title="class in fabric.worker">TransactionRestartingException</A></PRE>
<DL>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../fabric/worker/AbortException.html" title="class in fabric.worker">AbortException</A></CODE>
<DD><CODE><A HREF="../../../fabric/worker/TransactionRestartingException.html" title="class in fabric.worker">TransactionRestartingException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="sendPrepareMessages(long)"><!-- --></A><H3>
sendPrepareMessages</H3>
<PRE>
public void <B>sendPrepareMessages</B>(long&nbsp;commitTime)</PRE>
<DL>
<DD>Sends prepare messages to the cohorts. Also sends abort messages if any
 cohort fails to prepare.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="sendCommitMessagesAndCleanUp()"><!-- --></A><H3>
sendCommitMessagesAndCleanUp</H3>
<PRE>
public void <B>sendCommitMessagesAndCleanUp</B>()
                                  throws <A HREF="../../../fabric/worker/TransactionAtomicityViolationException.html" title="class in fabric.worker">TransactionAtomicityViolationException</A></PRE>
<DL>
<DD>Sends commit messages to the cohorts.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../fabric/worker/TransactionAtomicityViolationException.html" title="class in fabric.worker">TransactionAtomicityViolationException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="registerCreate(fabric.lang.Object._Impl)"><!-- --></A><H3>
registerCreate</H3>
<PRE>
public void <B>registerCreate</B>(<A HREF="../../../fabric/lang/Object._Impl.html" title="class in fabric.lang">Object._Impl</A>&nbsp;obj)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="registerRead(fabric.lang.Object._Impl)"><!-- --></A><H3>
registerRead</H3>
<PRE>
public void <B>registerRead</B>(<A HREF="../../../fabric/lang/Object._Impl.html" title="class in fabric.lang">Object._Impl</A>&nbsp;obj)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="registerWrite(fabric.lang.Object._Impl)"><!-- --></A><H3>
registerWrite</H3>
<PRE>
public boolean <B>registerWrite</B>(<A HREF="../../../fabric/lang/Object._Impl.html" title="class in fabric.lang">Object._Impl</A>&nbsp;obj)</PRE>
<DL>
<DD>This should be called <i>before</i> the object is modified.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>whether a new (top-level) transaction was created.</DL>
</DD>
</DL>
<HR>

<A NAME="checkForStaleObjects()"><!-- --></A><H3>
checkForStaleObjects</H3>
<PRE>
public boolean <B>checkForStaleObjects</B>()</PRE>
<DL>
<DD>Checks whether any of the objects used by a transaction are stale.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true iff stale objects were found</DL>
</DD>
</DL>
<HR>

<A NAME="startTransaction()"><!-- --></A><H3>
startTransaction</H3>
<PRE>
public void <B>startTransaction</B>()</PRE>
<DL>
<DD>Starts a new transaction. The sub-transaction runs in the same thread as
 the caller.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="startTransaction(fabric.common.TransactionID)"><!-- --></A><H3>
startTransaction</H3>
<PRE>
public void <B>startTransaction</B>(<A HREF="../../../fabric/common/TransactionID.html" title="class in fabric.common">TransactionID</A>&nbsp;tid)</PRE>
<DL>
<DD>Starts a new transaction with the given tid. The given tid is assumed to be
 a valid descendant of the current tid. If the given tid is null, a random
 tid is generated for the sub-transaction.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="startThread(java.lang.Thread)"><!-- --></A><H3>
startThread</H3>
<PRE>
public static void <B>startThread</B>(java.lang.Thread&nbsp;thread)</PRE>
<DL>
<DD>Starts the given thread, registering it as necessary.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="registerThread(java.lang.Thread)"><!-- --></A><H3>
registerThread</H3>
<PRE>
public void <B>registerThread</B>(java.lang.Thread&nbsp;thread)</PRE>
<DL>
<DD>Registers the given thread with the current transaction. This should be
 called before the thread is started.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="deregisterThread(java.lang.Thread)"><!-- --></A><H3>
deregisterThread</H3>
<PRE>
public void <B>deregisterThread</B>(java.lang.Thread&nbsp;thread)</PRE>
<DL>
<DD>Registers that the given thread has finished.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="registerRemoteCall(fabric.worker.remote.RemoteWorker)"><!-- --></A><H3>
registerRemoteCall</H3>
<PRE>
public void <B>registerRemoteCall</B>(<A HREF="../../../fabric/worker/remote/RemoteWorker.html" title="class in fabric.worker.remote">RemoteWorker</A>&nbsp;worker)</PRE>
<DL>
<DD>Registers a remote call to the given worker.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="associateLog(fabric.worker.transaction.Log)"><!-- --></A><H3>
associateLog</H3>
<PRE>
public void <B>associateLog</B>(<A HREF="../../../fabric/worker/transaction/Log.html" title="class in fabric.worker.transaction">Log</A>&nbsp;log)</PRE>
<DL>
<DD>Associates the given transaction log with this transaction manager.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getCurrentLog()"><!-- --></A><H3>
getCurrentLog</H3>
<PRE>
public <A HREF="../../../fabric/worker/transaction/Log.html" title="class in fabric.worker.transaction">Log</A> <B>getCurrentLog</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getCurrentTid()"><!-- --></A><H3>
getCurrentTid</H3>
<PRE>
public <A HREF="../../../fabric/common/TransactionID.html" title="class in fabric.common">TransactionID</A> <B>getCurrentTid</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getUpdateMap()"><!-- --></A><H3>
getUpdateMap</H3>
<PRE>
public <A HREF="../../../fabric/worker/remote/UpdateMap.html" title="class in fabric.worker.remote">UpdateMap</A> <B>getUpdateMap</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getFetchWorker(fabric.lang.Object._Proxy)"><!-- --></A><H3>
getFetchWorker</H3>
<PRE>
public <A HREF="../../../fabric/worker/remote/RemoteWorker.html" title="class in fabric.worker.remote">RemoteWorker</A> <B>getFetchWorker</B>(<A HREF="../../../fabric/lang/Object._Proxy.html" title="class in fabric.lang">Object._Proxy</A>&nbsp;proxy)</PRE>
<DL>
<DD><DL>

<DT><B>Returns:</B><DD>the worker on which the object resides. An object resides on a
         worker if it is either on that worker's local store, or if it was
         created by the current transaction and is owned by that worker.</DL>
</DD>
</DL>
<HR>

<A NAME="getSecurityCache()"><!-- --></A><H3>
getSecurityCache</H3>
<PRE>
public <A HREF="../../../fabric/lang/security/SecurityCache.html" title="class in fabric.lang.security">SecurityCache</A> <B>getSecurityCache</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="associateAndSyncLog(fabric.worker.transaction.Log, fabric.common.TransactionID)"><!-- --></A><H3>
associateAndSyncLog</H3>
<PRE>
public void <B>associateAndSyncLog</B>(<A HREF="../../../fabric/worker/transaction/Log.html" title="class in fabric.worker.transaction">Log</A>&nbsp;log,
                                <A HREF="../../../fabric/common/TransactionID.html" title="class in fabric.common">TransactionID</A>&nbsp;tid)</PRE>
<DL>
<DD>Associates the given log with this worker's transaction manager and
 synchronizes the log with the given tid.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../fabric/worker/transaction/ReadMapEntry.html" title="class in fabric.worker.transaction"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../fabric/worker/transaction/TransactionRegistry.html" title="class in fabric.worker.transaction"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?fabric/worker/transaction/TransactionManager.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TransactionManager.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
