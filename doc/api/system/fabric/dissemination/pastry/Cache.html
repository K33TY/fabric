<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_21) on Mon Aug 30 19:14:43 EDT 2010 -->
<TITLE>
Cache
</TITLE>

<META NAME="date" CONTENT="2010-08-30">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Cache";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../fabric/dissemination/pastry/DisseminationTimeoutException.html" title="class in fabric.dissemination.pastry"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?fabric/dissemination/pastry/Cache.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Cache.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
fabric.dissemination.pastry</FONT>
<BR>
Class Cache</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>fabric.dissemination.pastry.Cache</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>Cache</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
The cache object used by the disseminator to store globs. Essentially a
 hashtable specialized for globs; it also fetches globs directly from stores
 when needed.
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../fabric/dissemination/pastry/Cache.html#Cache()">Cache</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../fabric/dissemination/Glob.html" title="class in fabric.dissemination">Glob</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/dissemination/pastry/Cache.html#get(fabric.worker.RemoteStore, long)">get</A></B>(<A HREF="../../../fabric/worker/RemoteStore.html" title="class in fabric.worker">RemoteStore</A>&nbsp;store,
    long&nbsp;onum)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves a glob from the cache, without trying to fetch it from the store.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../fabric/dissemination/Glob.html" title="class in fabric.dissemination">Glob</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/dissemination/pastry/Cache.html#get(fabric.worker.RemoteStore, long, boolean)">get</A></B>(<A HREF="../../../fabric/worker/RemoteStore.html" title="class in fabric.worker">RemoteStore</A>&nbsp;store,
    long&nbsp;onum,
    boolean&nbsp;fetch)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves a glob from the cache, or fetches it from the store.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/dissemination/pastry/Cache.html#put(fabric.worker.RemoteStore, long, fabric.dissemination.Glob)">put</A></B>(<A HREF="../../../fabric/worker/RemoteStore.html" title="class in fabric.worker">RemoteStore</A>&nbsp;store,
    long&nbsp;onum,
    <A HREF="../../../fabric/dissemination/Glob.html" title="class in fabric.dissemination">Glob</A>&nbsp;g)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Put given glob into the cache.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../fabric/common/util/Pair.html" title="class in fabric.common.util">Pair</A>&lt;<A HREF="../../../fabric/common/util/Pair.html" title="class in fabric.common.util">Pair</A>&lt;<A HREF="../../../fabric/worker/Store.html" title="interface in fabric.worker">Store</A>,java.lang.Long&gt;,java.lang.Long&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/dissemination/pastry/Cache.html#sortedTimestamps()">sortedTimestamps</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a snapshot set of the timestamp for each OID currently in the
 cache.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Set&lt;<A HREF="../../../fabric/common/util/Pair.html" title="class in fabric.common.util">Pair</A>&lt;<A HREF="../../../fabric/common/util/Pair.html" title="class in fabric.common.util">Pair</A>&lt;<A HREF="../../../fabric/worker/Store.html" title="interface in fabric.worker">Store</A>,java.lang.Long&gt;,java.lang.Long&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/dissemination/pastry/Cache.html#timestamps()">timestamps</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a snapshot of the timestamp for each OID currently in the cache.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../fabric/dissemination/pastry/Cache.html#updateEntry(fabric.worker.RemoteStore, long, fabric.dissemination.Glob)">updateEntry</A></B>(<A HREF="../../../fabric/worker/RemoteStore.html" title="class in fabric.worker">RemoteStore</A>&nbsp;store,
            long&nbsp;onum,
            <A HREF="../../../fabric/dissemination/Glob.html" title="class in fabric.dissemination">Glob</A>&nbsp;g)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Updates a cache entry with the given glob.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="Cache()"><!-- --></A><H3>
Cache</H3>
<PRE>
public <B>Cache</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="get(fabric.worker.RemoteStore, long)"><!-- --></A><H3>
get</H3>
<PRE>
public <A HREF="../../../fabric/dissemination/Glob.html" title="class in fabric.dissemination">Glob</A> <B>get</B>(<A HREF="../../../fabric/worker/RemoteStore.html" title="class in fabric.worker">RemoteStore</A>&nbsp;store,
                long&nbsp;onum)</PRE>
<DL>
<DD>Retrieves a glob from the cache, without trying to fetch it from the store.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>store</CODE> - the store of the object to retrieve.<DD><CODE>onum</CODE> - the onum of the object.
<DT><B>Returns:</B><DD>the glob, if it is in the cache; null otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="get(fabric.worker.RemoteStore, long, boolean)"><!-- --></A><H3>
get</H3>
<PRE>
public <A HREF="../../../fabric/dissemination/Glob.html" title="class in fabric.dissemination">Glob</A> <B>get</B>(<A HREF="../../../fabric/worker/RemoteStore.html" title="class in fabric.worker">RemoteStore</A>&nbsp;store,
                long&nbsp;onum,
                boolean&nbsp;fetch)</PRE>
<DL>
<DD>Retrieves a glob from the cache, or fetches it from the store.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>store</CODE> - the store of the object to retrieve.<DD><CODE>onum</CODE> - the onum of the object.<DD><CODE>fetch</CODE> - true if we should fetch from store.
<DT><B>Returns:</B><DD>the glob, or null if fetch is false and glob does not exists in
         cache.</DL>
</DD>
</DL>
<HR>

<A NAME="put(fabric.worker.RemoteStore, long, fabric.dissemination.Glob)"><!-- --></A><H3>
put</H3>
<PRE>
public void <B>put</B>(<A HREF="../../../fabric/worker/RemoteStore.html" title="class in fabric.worker">RemoteStore</A>&nbsp;store,
                long&nbsp;onum,
                <A HREF="../../../fabric/dissemination/Glob.html" title="class in fabric.dissemination">Glob</A>&nbsp;g)</PRE>
<DL>
<DD>Put given glob into the cache.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>store</CODE> - the store of the object.<DD><CODE>onum</CODE> - the onum of the object.<DD><CODE>g</CODE> - the glob.</DL>
</DD>
</DL>
<HR>

<A NAME="updateEntry(fabric.worker.RemoteStore, long, fabric.dissemination.Glob)"><!-- --></A><H3>
updateEntry</H3>
<PRE>
public boolean <B>updateEntry</B>(<A HREF="../../../fabric/worker/RemoteStore.html" title="class in fabric.worker">RemoteStore</A>&nbsp;store,
                           long&nbsp;onum,
                           <A HREF="../../../fabric/dissemination/Glob.html" title="class in fabric.dissemination">Glob</A>&nbsp;g)</PRE>
<DL>
<DD>Updates a cache entry with the given glob. If the cache has no entry for
 the given oid, then nothing is changed.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true iff there was a cache entry for the given oid.</DL>
</DD>
</DL>
<HR>

<A NAME="timestamps()"><!-- --></A><H3>
timestamps</H3>
<PRE>
public java.util.Set&lt;<A HREF="../../../fabric/common/util/Pair.html" title="class in fabric.common.util">Pair</A>&lt;<A HREF="../../../fabric/common/util/Pair.html" title="class in fabric.common.util">Pair</A>&lt;<A HREF="../../../fabric/worker/Store.html" title="interface in fabric.worker">Store</A>,java.lang.Long&gt;,java.lang.Long&gt;&gt; <B>timestamps</B>()</PRE>
<DL>
<DD>Returns a snapshot of the timestamp for each OID currently in the cache.
 This set is NOT backed by the underlying map. If new keys are inserted or
 removed from the cache, they will not be reflected by the set returned.
 However, no synchronization is needed for working with the set.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="sortedTimestamps()"><!-- --></A><H3>
sortedTimestamps</H3>
<PRE>
public java.util.List&lt;<A HREF="../../../fabric/common/util/Pair.html" title="class in fabric.common.util">Pair</A>&lt;<A HREF="../../../fabric/common/util/Pair.html" title="class in fabric.common.util">Pair</A>&lt;<A HREF="../../../fabric/worker/Store.html" title="interface in fabric.worker">Store</A>,java.lang.Long&gt;,java.lang.Long&gt;&gt; <B>sortedTimestamps</B>()</PRE>
<DL>
<DD>Returns a snapshot set of the timestamp for each OID currently in the
 cache. The set is sorted in descending order by the popularity of the
 corresponding objects. Like <code>timestamps()</code>, the returned set is not
 backed by the underlying table.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../fabric/dissemination/pastry/DisseminationTimeoutException.html" title="class in fabric.dissemination.pastry"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?fabric/dissemination/pastry/Cache.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Cache.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
