#!/bin/bash

case `uname` in
  Linux)
   ;;
  *)
   echo 'OS not supported:' `uname`
   exit 1;;
esac

BINDIR="$(dirname $(which $(readlink -f $0)))"
MYNAME="$(basename "$0")"

if [[ $# -lt 3 ]] ; then
  gnome-terminal \
    --working-directory "${BINDIR}" \
    --tab --title "broker store" --command "./${MYNAME} 0s store brokerStore"   \
    --tab --title "A store"      --command "./${MYNAME} 0s store airlineAStore" \
    --tab --title "B store"      --command "./${MYNAME} 0s store airlineBStore" \
    --tab --title "U store"      --command "./${MYNAME} 0s store userStore"     \

#  sleep 10s
#
#   gnome-terminal \
#     --working-directory "${BINDIR}" \
#     --tab --title "broker worker" --command "./${MYNAME} 0s worker brokerWorker"   \
#    --tab --title "A worker"      --command "./${MYNAME} 1s worker airlineAWorker" \
#    --tab --title "B worker"      --command "./${MYNAME} 2s worker airlineBWorker" \
#    --tab --title "U worker"      --command "./${MYNAME} 3s worker userWorker"
else
  sleep $1
  shift
  CMD="./start-$1"
  shift
  "${CMD}" --name $@
fi
