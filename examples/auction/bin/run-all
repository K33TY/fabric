#!/bin/bash

BINDIR="$(dirname $(readlink -f $0))"
MYNAME="$(basename "$0")"

if [[ $# != 3 ]] ; then
  gnome-terminal \
    --working-directory "${BINDIR}" \
    --tab --title "broker store" --command "./${MYNAME} 0s store brokerStore"   \
    --tab --title "A store"      --command "./${MYNAME} 1s store airlineAStore" \
    --tab --title "B store"      --command "./${MYNAME} 2s store airlineBStore" \
    --tab --title "U store"      --command "./${MYNAME} 3s store userStore"     \

  sleep 10s

  gnome-terminal \
    --working-directory "${BINDIR}" \
    --tab --title "broker worker" --command "./${MYNAME} 0s worker brokerWorker"   \
    --tab --title "A worker"      --command "./${MYNAME} 1s worker airlineAWorker" \
    --tab --title "B worker"      --command "./${MYNAME} 2s worker airlineBWorker" \
    --tab --title "U worker"      --command "./${MYNAME} 3s worker userWorker"
else
  sleep $1
  ./start-$2 --name $3
fi
