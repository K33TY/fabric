#!/bin/bash

case `uname` in
  Linux)
   ;;
  *)
   echo 'OS not supported:' `uname`
   exit 1;;
esac

BINDIR="$(dirname $(which $(readlink -f $0)))"
MYNAME="$(basename "$0")"

if [[ $# -lt 3 ]] ; then
  gnome-terminal \
    --working-directory "${BINDIR}" \
    --tab --title "Snapp"     --command "./${MYNAME} 0s  snapp"     \
    --tab --title "MapServ"   --command "./${MYNAME} 3s  mapserv"   \
    --tab --title "FriendMap" --command "./${MYNAME} 6s  friendmap" \
    --tab --title "Alice"     --command "./${MYNAME} 9s  alice"     \
    --tab --title "Bob"       --command "./${MYNAME} 12s bob"       \

else
  sleep $1
  shift
  CMD="./start-store"
  shift
  "${CMD}" --name $@
fi
