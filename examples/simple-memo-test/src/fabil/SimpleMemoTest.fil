public class SimpleMemoTest {

  private static Store s = Worker.getWorker().getStore("store");

  /**
   * Needed for making remote copies of SimpleMemoTests.
   */
  public SimpleMemoTest SimpleMemoTest$() {
    fabric$lang$Object$();
    return this;
  }

  public static class Msg {
    public final int id;
    public Msg SimpleMemoTest$Msg$() {
      fabric$lang$Object$();
      return this;
    }

    public Msg(int id) {
      this.id = id;
    }
  }

  public memoized Msg dumbestTestEver(Msg m) {
    try { Thread.sleep(2000); } catch (InterruptedException e) { }
    return m;
  }

  public memoized Msg foo(int n) {
    try { Thread.sleep(2000); } catch (InterruptedException e) { }
    return new Msg@s(n).SimpleMemoTest$Msg$().SimpleMemoTest$Msg$();
  }

  public memoized Msg localFoo(int n) {
    try { Thread.sleep(2000); } catch (InterruptedException e) { }
    return new Msg(n).SimpleMemoTest$Msg$().SimpleMemoTest$Msg$();
  }

  public static void main(String[] args) {
    SimpleMemoTest testSimpleMemoTest = null;
    SimpleMemoTest localSimpleMemoTest = null;
    Msg m = null;
    atomic {
      testSimpleMemoTest = new SimpleMemoTest@s().SimpleMemoTest$().SimpleMemoTest$();
      localSimpleMemoTest = new SimpleMemoTest();
      m = new Msg@s(20).SimpleMemoTest$Msg$().SimpleMemoTest$Msg$();
      System.out.println(testSimpleMemoTest.dumbestTestEver(m));
      System.out.println(testSimpleMemoTest.foo(4));
      System.out.println(localSimpleMemoTest.localFoo(5));
    }
    atomic {
      System.out.println(testSimpleMemoTest.dumbestTestEver(m));
      System.out.println(testSimpleMemoTest.foo(4));
      System.out.println(localSimpleMemoTest.localFoo(5));
    }
  }

}

